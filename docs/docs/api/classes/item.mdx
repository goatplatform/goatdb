---
title: Item
sidebar_label: Item
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Item

An Item instance represents a snapshot of a data item including all of its
fields. An item is a map like object that tracks both the data and its
schema. Items are the contents of specific versions (commits) in the version
graph (history).

Typically you never need to create instances of this class directly. Instead,
use `GoatDB.item()` in order to get a LiveItem instance that's much easier
to work with.

**Implements:** [ReadonlyItem](../interfaces/readonlyitem), [Encodable](../interfaces/encodable)

## Constructor

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
new Item(config: ItemConfig<S> | ConstructorDecoderConfig<EncodedItem>, registry?: DataRegistry)
```

  </TabItem>
  <TabItem value="params" label="Parameters">

### config

**Type:** `ItemConfig<S> | ConstructorDecoderConfig<EncodedItem>`

Either an ItemConfig object containing the schema and data,
              or a ConstructorDecoderConfig for deserializing an encoded
              item

### registry *(optional)*

**Type:** `DataRegistry`

Optional schema manager to use. If not provided, the
                     default schema manager will be used

  </TabItem>
</Tabs>

## Properties

### registry *(readonly)*

**Type:** `DataRegistry`

## Methods

### nullItem()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
nullItem(registry: DataRegistry): Item<S>
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### registry

**Type:** `DataRegistry`

  </TabItem>
</Tabs>

**Returns:** `Item<S>`

### validate()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
validate(): [boolean, string]
```

  </TabItem>
</Tabs>

**Returns:** `[boolean, string]`

### dataUnsafe()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
dataUnsafe(): SchemaDataType<S>
```

  </TabItem>
</Tabs>

**Returns:** `SchemaDataType<S>`

### get()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
get(key: T): any
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### key

**Type:** `T`

The field's name.

  </TabItem>
</Tabs>

**Returns:** `any`

### has()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
has(key: T): boolean
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### key

**Type:** `T`

The field's name.

  </TabItem>
</Tabs>

**Returns:** `boolean`

### set()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
set(key: T, value: any): void
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### key

**Type:** `T`

The field's name.

#### value

**Type:** `any`

The value to set. Must match the value defined in this item's
             schema. If undefined is passed, this is the equivalent of
             calling `Item.delete(key)`.

  </TabItem>
</Tabs>

**Returns:** `void`

### setMulti()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
setMulti(data: Partial<SchemaDataType<S>>): void
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### data

**Type:** `Partial<SchemaDataType<S>>`

The values to set.

  </TabItem>
</Tabs>

**Returns:** `void`

### delete()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
delete(key: T): boolean
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### key

**Type:** `T`

The field to delete.

  </TabItem>
</Tabs>

**Returns:** `boolean`

### isEqual()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
isEqual(other: Item<S>): boolean
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### other

**Type:** `Item<S>`

The item to compare against

  </TabItem>
</Tabs>

**Returns:** `boolean`

### clone()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
clone(): Item<S>
```

  </TabItem>
</Tabs>

**Returns:** `Item<S>`

### cloneData()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
cloneData(onlyFields?: any[]): Readwrite<SchemaDataType<S>>
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### onlyFields *(optional)*

**Type:** `any[]`

Optional array of field names to copy. If provided, only
                  the specified fields will be cloned.

  </TabItem>
</Tabs>

**Returns:** `Readwrite<SchemaDataType<S>>`

### copyFrom()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
copyFrom(doc: Item<S> | ReadonlyItem<S>): void
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### doc

**Type:** `Item<S> | ReadonlyItem<S>`

The source item to copy from.

  </TabItem>
</Tabs>

**Returns:** `void`

### diff()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
diff(other: Item<S>, byCharacter?: boolean): DataChanges
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### other

**Type:** `Item<S>`

The item to compare against

#### byCharacter *(optional)*

**Type:** `boolean`

If true, rich text differences will be computed at the
                   character level rather than at the paragraph/element
                   level.

  </TabItem>
</Tabs>

**Returns:** `DataChanges`

### patch()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
patch(changes: DataChanges): void
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### changes

**Type:** `DataChanges`

The changes to apply to this item's data

  </TabItem>
</Tabs>

**Returns:** `void`

### diffKeys()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
diffKeys(other: Item<S>, local: boolean): string[]
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### other

**Type:** `Item<S>`

The item to compare against

#### local

**Type:** `boolean`

If true, compare local fields. If false, ignores local fields

  </TabItem>
</Tabs>

**Returns:** `string[]`

### upgradeSchema()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
upgradeSchema(newSchema?: Schema): boolean
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### newSchema *(optional)*

**Type:** `Schema`

Optional target schema to upgrade to

  </TabItem>
</Tabs>

**Returns:** `boolean`

### needsSchemaUpgrade()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
needsSchemaUpgrade(): boolean
```

  </TabItem>
</Tabs>

**Returns:** `boolean`

### normalize()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
normalize(): void
```

  </TabItem>
</Tabs>

**Returns:** `void`

### serialize()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
serialize(encoder: Encoder<string, CoreValue>, options: any): void
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### encoder

**Type:** `Encoder<string, CoreValue>`

The encoder to use for serialization

#### options

**Type:** `any`

Serialization options

  </TabItem>
</Tabs>

**Returns:** `void`

### deserialize()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
deserialize(decoder: Decoder): void
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### decoder

**Type:** `Decoder`

The decoder containing the encoded item data

  </TabItem>
</Tabs>

**Returns:** `void`

### toJS()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
toJS(local: boolean): ReadonlyJSONObject
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### local

**Type:** `boolean`

If true, serialization includes local data. If false,
             local data is skipped.

  </TabItem>
</Tabs>

**Returns:** `ReadonlyJSONObject`

### fromJS()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
fromJS(obj: ReadonlyJSONObject): Item<S>
```

  </TabItem>
  <TabItem value="params" label="Parameters">

#### obj

**Type:** `ReadonlyJSONObject`

The JSON object to deserialize

  </TabItem>
</Tabs>

**Returns:** `Item<S>`

### assertValidData()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
assertValidData(): void
```

  </TabItem>
</Tabs>

**Returns:** `void`

### invalidateCaches()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
invalidateCaches(): void
```

  </TabItem>
</Tabs>

**Returns:** `void`

### lock()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
lock(): void
```

  </TabItem>
</Tabs>

**Returns:** `void`

### unlock()

<Tabs>
  <TabItem value="signature" label="Signature" default>

```typescript
unlock(): void
```

  </TabItem>
</Tabs>

**Returns:** `void`

## See Also

- [Getting Started Guide](/tutorial)
- [API Reference](/api) - Browse all APIs
